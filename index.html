<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pillow Wall — Rules & Scoreboard</title>
  <style>
    :root{--bg:#f7f7f8;--card:#ffffff;--muted:#6b7280;--accent:#111827}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;color:var(--accent);background:var(--bg)}
    .app{max-width:860px;margin:48px auto;padding:28px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;flex-wrap:wrap}
    h1{font-size:20px;margin:0}
    .tabs{display:flex;gap:8px;flex-wrap:wrap}
    button.tab{background:transparent;border:none;padding:10px 14px;border-radius:10px;font-weight:600;cursor:pointer}
    button.tab[aria-selected="true"]{background:var(--card);box-shadow:0 6px 18px rgba(17,24,39,0.06)}
    main{background:var(--card);border-radius:14px;padding:20px;box-shadow:0 6px 18px rgba(17,24,39,0.04)}
    .cols{display:grid;grid-template-columns:1fr 340px;gap:20px}
    @media (max-width:880px){.cols{grid-template-columns:1fr}}
    .rules h2{margin-top:0}
    .rules ul{padding-left:18px;color:var(--muted)}
    .muted{color:var(--muted);font-size:13px}
    /* scoreboard */
    .score-panel{display:flex;flex-direction:column;gap:12px}
    label{font-size:13px;color:var(--muted)}
    input[type=number]{width:80px;padding:10px;border-radius:8px;border:1px solid #e6e9ee;background:transparent;text-align:center;font-size:16px}
    .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .half{flex:1}
    .btn{padding:10px 12px;border-radius:8px;border:none;background:#111827;color:#fff;font-weight:600;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid #e6e9ee}
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px;text-align:left;border-bottom:1px solid #f2f4f7;font-size:14px}
    .stats{background:#fbfbfc;padding:10px;border-radius:8px}
    .center{display:flex;gap:8px;align-items:center}
    footer{margin-top:16px;font-size:12px;color:var(--muted)}
    .subtabs{display:flex;gap:6px;margin-bottom:12px;flex-wrap:wrap}
    button.subtab{background:transparent;border:none;padding:6px 10px;border-radius:8px;font-size:14px;cursor:pointer}
    button.subtab[aria-selected="true"]{background:var(--bg);font-weight:600}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>Pillow Wall — Rules & Scoreboard</h1>
      <div class="tabs" role="tablist">
        <button class="tab" role="tab" aria-selected="true" data-target="#rules">Rules</button>
        <button class="tab" role="tab" aria-selected="false" data-target="#scoreboard">Scoreboard</button>
      </div>
    </header><main>
  <div class="cols">
    <section id="rules" class="rules" tabindex="0">
      <div class="subtabs" role="tablist">
        <button class="subtab" aria-selected="true" data-sub="#objective">Objective</button>
        <button class="subtab" aria-selected="false" data-sub="#gameplay">Gameplay</button>
        <button class="subtab" aria-selected="false" data-sub="#scoring">Scoring</button>
        <button class="subtab" aria-selected="false" data-sub="#special">Special Rules</button>
      </div>

      <div id="objective" class="rule-section">
        <h2>Objective</h2>
        <ul>
          <li>Be the first player to reach <strong>10 points</strong>.</li>
          <li>Two players stand at opposite ends of the room, each defending the wall behind them.</li>
          <li>Clear the space between both players before starting.</li>
        </ul>
      </div>

      <div id="gameplay" class="rule-section" hidden>
        <h2>Gameplay</h2>
        <ul>
          <li>Player A starts by throwing the pillow toward Player B’s wall.</li>
          <li>Player B tries to catch the pillow before it hits the wall.</li>
          <li>The player who lost the point throws next.</li>
          <li>Rebounds are allowed: the pillow may bounce off side walls or the ceiling before hitting the back wall.</li>
        </ul>
      </div>

      <div id="scoring" class="rule-section" hidden>
        <h2>Scoring</h2>
        <ul>
          <li>If the pillow hits the back wall, the thrower scores <strong>1 point</strong>.</li>
          <li>If the pillow touches the floor before the wall, or leaves the room, no point is scored.</li>
          <li>The first player to reach 10 points wins.</li>
          <li>At <strong>9–9</strong>, a player must lead by <strong>2 points</strong> to win.</li>
        </ul>
      </div>

      <div id="special" class="rule-section" hidden>
        <h2>Special Rules</h2>
        <ul>
          <li><strong>Speed mode:</strong> After catching the pillow, a player has <strong>3 seconds</strong> to throw it again.</li>
          <li>All throws must be made by hand. Kicking or dangerous throws are not allowed.</li>
        </ul>
      </div>
    </section>

    <aside id="scoreboard" class="score-panel" hidden>
      <div class="center">
        <strong>Match input — Daniel vs Valentin</strong>
        <button id="openPanel" class="btn ghost" style="margin-left:auto">Open panel</button>
      </div>

      <div id="panel" hidden>
        <div class="row">
          <label for="danielScore">Daniel</label>
          <input id="danielScore" type="number" min="0" max="10" value="0">
          <label for="valentinScore">Valentin</label>
          <input id="valentinScore" type="number" min="0" max="10" value="0">
          <label><input id="speedMod" type="checkbox"> SpeedMod</label>
        </div>

        <div class="row">
          <button id="addMatch" class="btn">Add match</button>
          <button id="clearMatches" class="btn ghost">Clear all</button>
        </div>

        <div style="margin-top:8px">
          <strong>Recent matches</strong>
          <table id="matchesTable" aria-live="polite">
            <thead><tr><th>#</th><th>Daniel</th><th>Valentin</th><th>Winner</th><th>SpeedMod</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>

        <div style="margin-top:10px" class="stats">
          <div><strong>Statistics</strong></div>
          <div id="statsContent">No matches yet.</div>
        </div>
      </div>

      <footer>Stats are stored locally in your browser (localStorage).</footer>
    </aside>
  </div>
</main>

  </div>  <script>
    // Tabs
    document.querySelectorAll('.tab').forEach(btn => btn.addEventListener('click', e => {
      document.querySelectorAll('.tab').forEach(b => b.setAttribute('aria-selected','false'));
      btn.setAttribute('aria-selected','true');
      const target = btn.dataset.target;
      document.querySelectorAll('main > .cols > *').forEach(s => s.hidden = true);
      document.querySelector(target).hidden = false;
    }));

    // Subtabs for rules
    document.querySelectorAll('.subtab').forEach(btn => btn.addEventListener('click', () => {
      document.querySelectorAll('.subtab').forEach(b => b.setAttribute('aria-selected','false'));
      btn.setAttribute('aria-selected','true');
      const sub = btn.dataset.sub;
      document.querySelectorAll('.rule-section').forEach(s => s.hidden = true);
      document.querySelector(sub).hidden = false;
    }));

    // Scoreboard logic
    const openPanel = document.getElementById('openPanel');
    const panel = document.getElementById('panel');
    const danielInput = document.getElementById('danielScore');
    const valentinInput = document.getElementById('valentinScore');
    const speedModInput = document.getElementById('speedMod');
    const addMatchBtn = document.getElementById('addMatch');
    const clearMatchesBtn = document.getElementById('clearMatches');
    const matchesTableBody = document.querySelector('#matchesTable tbody');
    const statsContent = document.getElementById('statsContent');

    openPanel.addEventListener('click', ()=>{
      panel.hidden = !panel.hidden;
      openPanel.textContent = panel.hidden ? 'Open panel' : 'Close panel';
    });

    function loadMatches(){
      try{ return JSON.parse(localStorage.getItem('pillow_matches')||'[]'); }catch(e){ return []; }
    }
    function saveMatches(list){ localStorage.setItem('pillow_matches', JSON.stringify(list)); }

    function renderMatches(){
      const matches = loadMatches();
      matchesTableBody.innerHTML = '';
      matches.forEach((m,i)=>{
        const winner = m.daniel === m.valentin ? 'Tie' : (m.daniel>m.valentin ? 'Daniel' : 'Valentin');
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${i+1}</td><td>${m.daniel}</td><td>${m.valentin}</td><td>${winner}</td><td>${m.speedMod ? '✔️' : '—'}</td>`;
        matchesTableBody.appendChild(tr);
      });
      renderStats(matches);
    }

    function renderStats(matches){
      if(!matches.length){ statsContent.textContent = 'No matches yet.'; return; }

      const speedMatches = matches.filter(m=>m.speedMod);
      const normalMatches = matches.filter(m=>!m.speedMod);

      function getStats(list){
        let dw=0,vw=0,ties=0,dp=0,vp=0;
        list.forEach(m=>{
          dp+=m.daniel; vp+=m.valentin;
          if(m.daniel===m.valentin) ties++; else if(m.daniel>m.valentin) dw++; else vw++;
        });
        const total=list.length;
        return {dw,vw,ties,total,dp:(dp/total).toFixed(2),vp:(vp/total).toFixed(2)};
      }

      const all=getStats(matches);
      const speed=getStats(speedMatches);
      const normal=getStats(normalMatches);

      statsContent.innerHTML = `
        <div><strong>All matches:</strong> ${all.total} (ties: ${all.ties})</div>
        <div>Daniel — Wins: ${all.dw}, Avg: ${all.dp}</div>
        <div>Valentin — Wins: ${all.vw}, Avg: ${all.vp}</div>
        <hr>
        <div><strong>SpeedMod:</strong> ${speed.total}</div>
        <div>Daniel — Wins: ${speed.dw}, Avg: ${speed.dp}</div>
        <div>Valentin — Wins: ${speed.vw}, Avg: ${speed.vp}</div>
        <hr>
        <div><strong>Normal mode:</strong> ${normal.total}</div>
        <div>Daniel — Wins: ${normal.dw}, Avg: ${normal.dp}</div>
        <div>Valentin — Wins: ${normal.vw}, Avg: ${normal.vp}</div>
      `;
    }

    addMatchBtn.addEventListener('click', ()=>{
      const d = Math.min(10, Math.max(0, Math.floor(Number(danielInput.value)||0)));
      const v = Math.min(10, Math.max(0, Math.floor(Number(valentinInput.value)||0)));
      const matches = loadMatches();
      matches.push({daniel:d, valentin:v, speedMod: speedModInput.checked, created: Date.now()});
      saveMatches(matches);
      renderMatches();
      danielInput.value = 0; valentinInput.value = 0; speedModInput.checked = false;
    });

    clearMatchesBtn.addEventListener('click', ()=>{
      if(confirm('Clear all saved matches?')){
        localStorage.removeItem('pillow_matches');
        renderMatches();
      }
    });

    renderMatches();

    document.querySelector('[data-target="#scoreboard"]').addEventListener('click', ()=>{
      document.getElementById('scoreboard').hidden = false;
    });
  </script></body>
</html>
